const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Game-Dr9zSDgt.js","assets/auth-BxfdJgsU.js","assets/vendor-Cs8wUaRe.js","assets/ethers-BBATp_Pg.js","assets/index-C3S8jdOc.js","assets/index-DIIAfn_-.css"])))=>i.map(i=>d[i]);
import{r,a as k,K as T,j as t,_ as h}from"./auth-BxfdJgsU.js";import"./vendor-Cs8wUaRe.js";const M=({isOpen:u,onClose:g})=>{var b;const[m,p]=r.useState([]),[E,f]=r.useState([]),[i,d]=r.useState(!1),[_,l]=r.useState(null),[v,n]=r.useState(null),[s,c]=r.useState("auth"),[P,C]=r.useState(null),{wallets:L}=k(),{authenticated:x}=T(),A=localStorage.getItem("guestId")||"Unknown",S=(b=L.find(e=>e.walletClientType==="privy"))==null?void 0:b.address,D=async()=>{d(!0),l(null),n(null);try{const e=await h(()=>import("./Game-Dr9zSDgt.js").then(a=>a.a),__vite__mapDeps([0,1,2,3,4,5])).then(a=>a.getLeaderBoard());p(e)}catch(e){e instanceof Error?l(e.message):l(typeof e=="object"&&e!==null?e.detail:"Unknown error")}try{const e=await h(()=>import("./Game-Dr9zSDgt.js").then(a=>a.a),__vite__mapDeps([0,1,2,3,4,5])).then(a=>a.getAuthLeaderBoard());f(e)}catch(e){e instanceof Error?n(e.message):n(typeof e=="object"&&e!==null?e.detail:"Unknown error")}d(!1)},I=async()=>{if(d(!0),s==="auth"){n(null);try{const e=await h(()=>import("./Game-Dr9zSDgt.js").then(a=>a.a),__vite__mapDeps([0,1,2,3,4,5])).then(a=>a.getAuthLeaderBoard());f(e)}catch(e){e instanceof Error?n(e.message):n(typeof e=="object"&&e!==null?e.detail:"Unknown error")}}else{l(null);try{const e=await h(()=>import("./Game-Dr9zSDgt.js").then(a=>a.a),__vite__mapDeps([0,1,2,3,4,5])).then(a=>a.getLeaderBoard());p(e)}catch(e){e instanceof Error?l(e.message):l(typeof e=="object"&&e!==null?e.detail:"Unknown error")}}d(!1)};if(r.useEffect(()=>{c(x?"auth":"guest")},[x]),r.useEffect(()=>{u&&D()},[u]),!u)return null;const j=s==="auth"?E:m,N=s==="auth"?v:_,w=s==="auth"?6:4;return t.jsx("div",{className:"popup-overlay",children:t.jsxs("div",{className:"popup-content",children:[t.jsxs("div",{className:"popup-header",children:[t.jsx("h2",{children:"Leaderboard"}),t.jsx("button",{className:"close-button",onClick:g,children:"‚úï"})]}),t.jsxs("div",{className:"tabs",children:[t.jsx("button",{className:`tab-button ${s==="auth"?"active":""}`,onClick:()=>c("auth"),children:"Authorized players"}),t.jsx("button",{className:`tab-button ${s==="guest"?"active":""}`,onClick:()=>c("guest"),children:"Guests"})]}),t.jsx("div",{className:"table-wrapper",style:{maxHeight:"700px",overflowY:"auto"},children:t.jsxs("table",{className:"transactions-table",style:{width:"100%",tableLayout:"fixed"},children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:{width:"5%"},children:"Place"}),s==="auth"?t.jsx("th",{style:{width:"20%"},children:"Username/Wallet"}):t.jsx("th",{style:{width:"25%"},children:"Player ID"}),s==="auth"&&t.jsx("th",{style:{width:"10%"},children:"Top Score"}),t.jsx("th",{style:{width:"15%"},children:"Total Score"}),t.jsx("th",{style:{width:s==="auth"?"50%":"45%"},children:"Date"})]})}),t.jsxs("tbody",{children:[j.map((e,a)=>{let o,y=e.updated_at;return s==="auth"?o=e.address:o=e.id,t.jsxs("tr",{children:[t.jsx("td",{children:a+1}),s==="auth"?t.jsx("td",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.username?e.username.startsWith("@")?t.jsx("a",{href:`https://x.com/${e.username.substring(1)}`,target:"_blank",rel:"noopener noreferrer",children:e.username}):e.username:e.wallet?e.wallet.slice(0,6)+"..."+e.wallet.slice(-3):"Unknown"}):t.jsx("td",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:A===o||S===o?"You!üèÜ":o}),s==="auth"&&t.jsx("td",{children:e.record_score}),t.jsx("td",{children:e.total_score}),t.jsx("td",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:y?new Date(y).toLocaleString():"Not processed"})]},a)}),j.length===0&&!i&&t.jsx("tr",{children:t.jsx("td",{colSpan:w,style:{textAlign:"center",width:"100%"},children:N||"No players to display"})}),i&&t.jsx("tr",{children:t.jsx("td",{colSpan:w,style:{textAlign:"center",width:"100%"},children:"Loading leaderboard..."})})]})]})}),t.jsx("button",{className:"refresh-button",onClick:I,disabled:i,children:i?"Loading...":"Refresh"})]})})};export{M as default};
